const DEAL_STATUSES_MAP = {
    CREATED: 'created',
    CONFIRMED: 'confirmed',
    PROBLEM: 'problem',
    GOING_TO_UPLOADING: 'going_to_uploading',
    UPLOADING: 'uploading',
    IN_PROGRESS: 'in_progress',
    DOWNLOADING: 'downloading',
    DONE: 'done',
    FAILED: 'failed',
    COMPLETED: 'completed',
};

const DEAL_STATUSES_ROUTE = {
    CREATE: 'create',
    CONFIRM: 'confirm',
    CANCEL: 'cancel',
};

const FINISHED_STATUSES_LIST = [
    DEAL_STATUSES_MAP.DONE,
    DEAL_STATUSES_MAP.FAILED,
    DEAL_STATUSES_MAP.COMPLETED,
];

const ACTIVE_STATUSES_LIST = [
    DEAL_STATUSES_MAP.GOING_TO_UPLOADING,
    DEAL_STATUSES_MAP.UPLOADING,
    DEAL_STATUSES_MAP.IN_PROGRESS,
    DEAL_STATUSES_MAP.DOWNLOADING,
];

const IN_WORK_STATUSES_LIST = [
    DEAL_STATUSES_MAP.CONFIRMED,
    DEAL_STATUSES_MAP.GOING_TO_UPLOADING,
    DEAL_STATUSES_MAP.UPLOADING,
    DEAL_STATUSES_MAP.IN_PROGRESS,
    DEAL_STATUSES_MAP.DOWNLOADING,
    DEAL_STATUSES_MAP.PROBLEM,
];

const ALLOWED_NEXT_STATUSES_MAP = {
    [DEAL_STATUSES_MAP.CREATED]: new Set([
        DEAL_STATUSES_ROUTE.CONFIRM,
        DEAL_STATUSES_ROUTE.CANCEL,
    ]),
    [DEAL_STATUSES_ROUTE.CONFIRM]: new Set([
        // DEAL_STATUSES_MAP.PROBLEM,
        // DEAL_STATUSES_MAP.FAILED,
    ]),
    [DEAL_STATUSES_MAP.PROBLEM]: new Set([
        // DEAL_STATUSES_MAP.CONFIRMED,
        // DEAL_STATUSES_MAP.GOING_TO_UPLOADING,
        // DEAL_STATUSES_MAP.UPLOADING,
        // DEAL_STATUSES_MAP.IN_PROGRESS,
        // DEAL_STATUSES_MAP.DOWNLOADING,
        // DEAL_STATUSES_MAP.FAILED,
    ]),
    [DEAL_STATUSES_MAP.GOING_TO_UPLOADING]: new Set([
        DEAL_STATUSES_MAP.UPLOADING,
        DEAL_STATUSES_MAP.PROBLEM,
    ]),
    [DEAL_STATUSES_MAP.UPLOADING]: new Set([
        DEAL_STATUSES_MAP.IN_PROGRESS,
        DEAL_STATUSES_MAP.PROBLEM,
    ]),
    [DEAL_STATUSES_MAP.IN_PROGRESS]: new Set([
        DEAL_STATUSES_MAP.DOWNLOADING,
        DEAL_STATUSES_MAP.PROBLEM,
    ]),
    [DEAL_STATUSES_MAP.DOWNLOADING]: new Set([
        DEAL_STATUSES_MAP.DONE,
        DEAL_STATUSES_MAP.PROBLEM,
    ]),
    [DEAL_STATUSES_MAP.DONE]: new Set([
        DEAL_STATUSES_MAP.DONE,
        DEAL_STATUSES_MAP.COMPLETED,
    ]),
};

module.exports = {
    DEAL_STATUSES_MAP,
    FINISHED_STATUSES_LIST,
    ALLOWED_NEXT_STATUSES_MAP,
    ACTIVE_STATUSES_LIST,
    IN_WORK_STATUSES_LIST,
    DEAL_STATUSES_ROUTE,
};
